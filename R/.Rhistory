library(sp)
library(rgdal)
library(rgeos)
library(raster)
# define projections
LAMBERT <- CRS("+proj=cea +lon_0=Central Meridian +lat_ts=Standard Parallel +x_0=False Easting +y_0=False Northing")
WGS84 <- CRS("+proj=longlat +datum=WGS84 +no_defs")
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile", layer = "beaver")
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile/", layer = "beaver")
getwd()
list.files("../data/beaver_shapefile")
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile", layer = "beaver")
library(sp)
library(rgdal)
library(rgeos)
library(raster)
# define projections
LAMBERT <- CRS("+proj=cea +lon_0=Central Meridian +lat_ts=Standard Parallel +x_0=False Easting +y_0=False Northing")
WGS84 <- CRS("+proj=longlat +datum=WGS84 +no_defs")
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile", layer = "species_4007")
beaver.shape
plot(beaver.shape)
world <- readOGR(dsn = "../data/global_boundaries", layer="TM_WORLD_BORDERS-0.3")
plot(world, add=TRUE)
plot(world, col="grey")
plot(beaver.shape, col="green")
plot(world, add=T)
CRS(world)
proj4string(world)
proj4string(beaver.shape)
library(dismo)
beaver.point <- gbif("Castor", "fiber", geo=T)
SpatialPointsDataFrame(
)
?SpatialPointsDataFrame
head(beaver.point)
names(beaver.shape)
names(beaver.point)
beaver.point <- beaver.point[,c("lon","lat")]
plot(beaver.point)
plot(beaver.shape, col="green")
plot(world, add=T)
plot(beaver.point, add=T, cex=0.1, col="red")
plot(beaver.shape, col="green")
plot(world, add=T)
points(beaver.point, add=T, cex=0.1, col="red")
plot(beaver.point, add=T, cex=0.1, col="red")
plot(world, add=T)
beaver.point <- beaver.point[beaver.point$lon > -20,]
plot(beaver.point, add=T, cex=0.1, col="red")
beaver.point <- beaver.point[beaver.point$lon < 60,]
plot(beaver.point, add=T, cex=0.1, col="red")
plot(world, add=T)
plot(beaver.shape, col="green", add=T)
plot(beaver.shape, col="green", add=T)
plot(world, add=T)
plot(beaver.shape, col="green")
plot(world, add=T)
plot(beaver.point, add=T, cex=0.1, col="red")
plot(beaver.shape, col="green")
plot(world, add=T)
points(beaver.point, add=T, cex=0.1, col="red")
beaver.point <- SpatialPoints(beaver.points)
beaver.point.sp <- SpatialPoints(beaver.point)
beaver.point <- na.omit(beaver.point)
beaver.point.sp <- SpatialPoints(beaver.point)
plot(beaver.point.sp)
plot(world, add=T)
beaver.point.sp$proj4string
crs(beaver.point.sp)
?crs
crs(beaver.point.sp) <- WGS84
plot(beaver.shape, col="green")
plot(world, add=T)
points(beaver.point.sp, add=T, cex=0.1, col="red")
beaver.point.eq <- spTransform(beaver.point.sp, CRSobj=LAMBERT)
beaver.shape.eq <- spTransform(beaver.shape, CRSobj=LAMBERT)
world.eq <- spTransform(world, CRSobj=LAMBERT)
head(beaver.shape)
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile", layer = "species_4007")
beaver.shape@data <- dplyr::select(beaver.shape@data, binomial)
head(beaver.shape@dta)
head(beaver.shape@data)
# define projections
LAMBERT <- CRS("+proj=cea +lon_0=Central Meridian +lat_ts=Standard Parallel +x_0=False Easting +y_0=False Northing")
WGS84 <- CRS("+proj=longlat +datum=WGS84 +no_defs")
# load the raw data
beaver.shape <- readOGR(dsn = "../data/beaver_shapefile", layer = "species_4007")
beaver.shape@data <- dplyr::select(beaver.shape@data, binomial)
world <- readOGR(dsn = "../data/global_boundaries", layer="TM_WORLD_BORDERS-0.3")
beaver.point <- gbif("Castor", "fiber", geo=T)
beaver.point <- beaver.point[,c("lon","lat")]
beaver.point <- beaver.point[beaver.point$lon > -20,]
beaver.point <- beaver.point[beaver.point$lon < 60,]
beaver.point <- na.omit(beaver.point)
beaver.point.sp <- SpatialPoints(beaver.point)
crs(beaver.point.sp) <- WGS84
# plot the raw data
plot(beaver.shape, col="green")
plot(world, add=T)
points(beaver.point.sp, add=T, cex=0.1, col="red")
# transform the data to an equal-area Lambert projection
beaver.point.eq <- spTransform(beaver.point.sp, CRSobj=LAMBERT)
world.eq <- spTransform(world, CRSobj=LAMBERT)
beaver.shape.eq <- spTransform(beaver.shape, CRSobj=LAMBERT)
# plot the transformed data
plot(beaver.shape.eq, col="green")
plot(world.eq, add=T)
points(beaver.point.eq, add=T, cex=0.1, col="red")
LAM_EUR <- CRS("+proj=laea +lat_0=55 +lon_0=20 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs ")
LAM_EUR <- CRS("+proj=laea +lat_0=55 +lon_0=20 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs ")
world.eq <- spTransform(world, CRSobj=LAM_EUR)
plot(world.eq, add=T)
plot(world.eq)
LAM_EUR <- CRS("+proj=laea +lat_0=55 +lon_0=40 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs ")
world.eq <- spTransform(world, CRSobj=LAM_EUR)
plot(world.eq)
# transform the data to an equal-area Lambert projection
beaver.point.eq <- spTransform(beaver.point.sp, CRSobj=LAM_EUR)
world.eq <- spTransform(world, CRSobj=LAM_EUR)
beaver.shape.eq <- spTransform(beaver.shape, CRSobj=LAM_EUR)
# plot the transformed data
plot(beaver.shape.eq, col="green")
plot(world.eq)
points(beaver.point.eq, add=T, cex=0.1, col="red")
plot(beaver.shape.eq, col="green")
plot(world.eq, add=T)
points(beaver.point.eq, add=T, cex=0.1, col="red")
?writeOGR
writeOGR(obj=beaver.shape.eq, dsn="../data/beaver_shapefile", layer="beaver_equal_area", driver="ESRI Shapefile")
writeOGR(obj=beaver.point.eq, dsn="../data/beaver_points", layer="beaver_points_equal_area", driver="ESRI Shapefile")
coords(beaver.point.eq)
SpatialPointsDataFrame(beaver.point.eq)
SpatialPointsDataFrame(beaver.point.eq, data=NULL)
coordinates(beaver.point.eq)
head(coordinates(beaver.point.eq))
coords.eq <- coodrinates(beaver.point.eq)
coords.eq <- coordinates(beaver.point.eq)
names(coords.eq) <- c(X, Y)
write.csv(coords.eq, file="../data/beaver_points/beaver_points_equal_area.csv", row.names = FALSE)
beaver.point.eq <- spTransform(beaver.point.sp, CRSobj=LAM_EUR)
coords.eq <- coordinates(beaver.point.eq)
names(coords.eq) <- c("X", "Y")
write.csv(coords.eq, file="../data/beaver_points/beaver_points_equal_area.csv", row.names = FALSE)
head(coords.eq)
colnames(coords.eq) <- c("X", "Y")
head(coords.eq)
write.csv(coords.eq, file="../data/beaver_points/beaver_points_equal_area.csv", row.names = FALSE)
writeOGR(obj=beaver.shape, dsn="../data/beaver_shapefile", layer="beaver_wgs84", driver="ESRI Shapefile")
head(beaver.point)
write.csv(beaver.point, file="../data/beaver_points/beaver_points_wgs84.csv", row.names = FALSE)
beaver.point.sp <- SpatialPoints(beaver.point)
crs(beaver.point.sp) <- WGS84
# plot the raw data
plot(beaver.shape, col="green")
plot(world, add=T)
points(beaver.point.sp, add=T, cex=0.1, col="red")
# transform the data to an equal-area Lambert projection
beaver.point.eq <- spTransform(beaver.point.sp, CRSobj=LAM_EUR)
coords.eq <- coordinates(beaver.point.eq)
colnames(coords.eq) <- c("X", "Y")
world.eq <- spTransform(world, CRSobj=LAM_EUR)
beaver.shape.eq <- spTransform(beaver.shape, CRSobj=LAM_EUR)
# plot the transformed data
plot(beaver.shape.eq, col="green")
plot(world.eq, add=T)
points(beaver.point.eq, cex=0.1, col="red")
# export the data
writeOGR(obj=beaver.shape.eq, dsn="../data/beaver_shapefile", layer="beaver_shape_equal_area", driver="ESRI Shapefile")
writeOGR(obj=beaver.shape, dsn="../data/beaver_shapefile", layer="beaver_shape_wgs84", driver="ESRI Shapefile")
write.csv(coords.eq, file="../data/beaver_points/beaver_points_equal_area.csv", row.names = FALSE)
write.csv(beaver.point, file="../data/beaver_points/beaver_points_wgs84.csv", row.names = FALSE)
writeOGR(obj=world.eq, dsn="../data/global_boundaries", layer="world_equal_area", driver="ESRI Shapefile")
